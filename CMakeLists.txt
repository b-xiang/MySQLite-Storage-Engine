PROJECT(mysqlite)

ADD_DEFINITIONS("-DMYSQLITE_VERSION_HEX=0x0001")
ADD_DEFINITIONS("-DMYSQLITE_USING_CMAKE")

ADD_DEFINITIONS("-DMYSQL_DYNAMIC_PLUGIN")

SET(MYSQLITE_SOURCES src/ha_mysqlite.cc src/udf_sqlite_db.cc)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/storage/mysqlite/src)
MYSQL_ADD_PLUGIN(mysqlite ${MYSQLITE_SOURCES} STORAGE_ENGINE MODULE_ONLY MODULE_OUTPUT_NAME "libmysqlite_engine")

ADD_LIBRARY(mysqlite_engine SHARED ${MYSQLITE_SOURCES})
TARGET_LINK_LIBRARIES(mysqlite_engine ${CMAKE_SOURCE_DIR}/libservices/libmysqlservices.a ${CMAKE_SOURCE_DIR}/libmysql/libmysqlclient.a)
